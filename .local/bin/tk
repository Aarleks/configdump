#!/bin/sh


case $1 in
    w)
	printf "What have you been doing?\\n"
	read -r string
	printf "For how long?\\n"
	read -r time
	printf "What type of work was this?\\n"
	read -r type
	echo "$(date "+%F"),$type,$time,\"$string\"" >> $HOME/Dropbox/MRes/Development/2020_Work_Time_Tracker.csv
	printf "\\n\e[3mWork so far today\e[0m:\\n"
	today="$(grep $(date "+%F") $HOME/Dropbox/MRes/Development/2020_Work_Time_Tracker.csv)"
	hours="$(grep $(date "+%F") $HOME/Dropbox/MRes/Development/2020_Work_Time_Tracker.csv | awk -F ',' '{s+=$3} END {print s}')"
	echo "$today"
	printf "\e[1;32mHours Worked Today: $hours\\n" ;;
    wr)
	hours="$(grep $(date "+%F") $HOME/Dropbox/MRes/Development/2020_Work_Time_Tracker.csv | awk -F ',' '{s+=$3} END {print s}')"
	printf "\e[1;32mHours Worked Today: $hours\\n" ;;
    k)
	printf "Any notes?\\n"
	read -r notes
	weight=$2
	echo "$(date "+%F"),$weight,\"$notes\"" >> $HOME/Dropbox/Health_and_Fitness/weight-log.csv
	;;
    *) cat << EOF
Tracker - a script for recording information that's useful to you.

These are the options:
  w         Record the task, time, and type of work into
            the tracker file. All data input is prompted.

  wr        Print the total time recorded so far today

  k         Record bodyweight and any notes. Weight is an
            argument; e.g. "tk kg 90". Notes are prompted.

  all else  Print this message.
EOF
esac
